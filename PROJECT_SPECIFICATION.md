# IT補助金アシストツール開発 - プロジェクト仕様書

## プロジェクト概要

### 基本情報
- **プロジェクト名**: IT補助金アシストツール
- **開発期間**: 4週間でMVP版完成
- **目標**: ユーザーが最小の入力で補助金申請を開始できる革新的なツール

### ビジョン
設計フェーズが完了し、実装フェーズに移行。30種類の書類から必要なものだけを自動判定し、3つの質問で申請枠を決定する効率性を実現。

### 根本的なニーズ
- 30種類の書類から必要なものだけを自動判定
- 3つの質問で申請枠を決定する効率性
- データベースとAPIの堅牢な基盤構築

### 成功基準
- Supabaseで全テーブル作成完了
- 企業情報の登録・編集・表示が可能
- IT導入補助金の申請枠判定が動作

### 期待される価値
- ユーザーの申請準備時間を70%削減
- 必要書類の見落としゼロ

## 技術スタック

### フロントエンド
- React + TypeScript
- UI: 青・白・ベージュのトンマナ
- レスポンシブデザイン対応
- Figma MCP + Playwright使用可能

### バックエンド
- Node.js + Express
- Supabase (データベース)
- Supabase MCP + Jest使用可能
- 環境変数管理 (.env + nodemon.json)

### 品質管理
- 自動テストスイート
- セキュリティ対策
- パフォーマンス監視

## プロジェクト構成

```
/Claude-Code-Communication/
├── frontend/                 # フロントエンド実装
├── backend/                  # バックエンド実装
├── docs/                     # 設計書・仕様書
├── questionnaires/           # 補助金質問票
├── instructions/             # エージェント指示書
│   ├── president.md
│   ├── boss.md
│   └── worker.md
└── agent-send.sh            # エージェント通信スクリプト
```

## 開発チーム体制

### PRESIDENT (別セッション)
- 統括責任者
- ビジョン設定とプロジェクト管理

### boss1 (multiagent:0.0)
- チームリーダー
- ファシリテーションと統合管理

### Worker1 (multiagent:0.1) - フロントエンド
- React画面とUI実装
- 申請枠判定フローのUI化
- Figma MCP + Playwright対応

### Worker2 (multiagent:0.2) - バックエンド
- Supabaseテーブル作成
- API実装
- データ連携
- Supabase MCP + Jest対応

### Worker3 (multiagent:0.3) - 品質管理
- テストデータ作成
- セキュリティ設定
- コードレビュー

## 開発進捗状況

### 完了済み項目
✅ **緊急対応フェーズ**
- バックエンド環境変数エラー解決
- フロントエンドAPI接続設定改善
- 環境設定とセキュリティチェック

✅ **設計フェーズ**
- 補助金申請プロセスの可視化資料完成
- 着金スケジュール（6-14ヶ月の全工程）設計
- 各補助金の申請ステップと必要書類一覧
- 役所別書類取得ガイド
- React実装コンポーネント設計

✅ **並列開発フェーズ**
- Worker1: 補助金申請ガイド画面実装タスク指示完了
- Worker2: データベーススキーマとAPI実装タスク指示完了
- Worker3: テストデータ作成と検証システム構築完了

### Worker3完了成果
- 3補助金×15申請枠の完全対応
- AIによる50社分テストデータ自動生成
- 67件の境界値テストケース
- リアルタイム品質監視ダッシュボード
- CI/CD統合の自動テストスイート

## 対象補助金

### 1. IT導入補助金
- デジタル化基盤導入類型
- 通常枠
- 複数社連携IT導入類型
- インボイス枠
- セキュリティ対策推進枠

### 2. ものづくり補助金
- 通常枠
- 回復型賃上げ・雇用拡大枠
- デジタル枠
- グリーン枠
- グローバル市場開拓枠

### 3. 小規模事業者持続化補助金
- 通常枠
- 賃金引上げ枠
- 卒業枠
- 後継者支援枠
- 創業枠

## 主要機能

### 1. 申請枠判定システム
- 3つの質問による自動判定
- 各補助金の判定ロジック
- 必要書類の動的抽出

### 2. 企業情報管理
- 企業登録・編集機能
- 申請状況管理
- ダッシュボード表示

### 3. 申請ガイド機能
- ステップバイステップガイド
- 着金スケジュール表示
- 必要書類チェックリスト

### 4. スケジュール管理
- 申請期限管理
- プロセス進捗追跡
- 着金予測計算（6-14ヶ月スパン）

## データベース設計

### テーブル構成
- `companies` - 企業情報
- `applications` - 申請情報
- `subsidies` - 補助金マスタ
- `application_schedules` - 申請スケジュール
- `required_documents` - 必要書類マスタ
- `eligibility_questionnaires` - 申請枠判定質問票
- `eligibility_rules` - 申請枠判定ロジック

### セキュリティ設定
- Supabase RLSポリシー実装
- 企業間データ分離
- APIエンドポイント認証・認可

## 品質管理

### テスト戦略
- 機能テスト: 申請枠判定ロジック
- UIテスト: レスポンシブデザイン、アクセシビリティ
- パフォーマンステスト: 応答時間最適化（p95 < 500ms）
- セキュリティテスト: データ保護、認証

### テストデータ
- 実際の申請パターンを網羅する企業データ
- 全申請枠をカバーするテストケース
- 境界値テストケース
- エラーケースとエッジケース

## エージェント通信システム

### 通信方法
```bash
./agent-send.sh [相手] "[メッセージ]"
```

### 基本フロー
PRESIDENT → boss1 → workers → boss1 → PRESIDENT

### 進捗管理
- タイムボックス管理
- 完了マーカーファイル作成
- 構造化された報告システム

## 開発再起動手順

### 1. 環境確認
```bash
# Git状態確認
git status

# 環境変数確認
cat backend/.env

# 依存関係確認
cd backend && npm install
cd frontend && npm install
```

### 2. サービス起動
```bash
# バックエンド起動
cd backend && npm run dev

# フロントエンド起動
cd frontend && npm run dev
```

### 3. Worker状態確認
```bash
# 完了状況確認
ls -la tmp/worker*_done.txt

# 進捗ログ確認
cat tmp/worker*_progress.log
```

### 4. 開発再開
```bash
# Worker1の状況確認と指示
./agent-send.sh worker1 "現在の作業状況を報告してください"

# Worker2の状況確認と指示
./agent-send.sh worker2 "現在の作業状況を報告してください"

# Worker3は完了済み
```

## 次回の開発優先事項

### 高優先度
1. Worker1からの完了報告待ち（フロントエンド実装）
2. Worker2からの完了報告待ち（バックエンドAPI実装）
3. 統合テストの実施
4. MVP版の最終確認

### 中優先度
1. パフォーマンス最適化
2. セキュリティ強化
3. ユーザビリティ改善
4. ドキュメント整備

## 課題と解決済み事項

### 解決済み
- ✅ バックエンド環境変数エラー → nodemon.json設定で解決
- ✅ フロントエンドAPI接続エラー → エラーハンドリング強化で解決
- ✅ セキュリティ設定 → RLSポリシー実装完了
- ✅ テストデータ不足 → AI活用で50社分自動生成完了

### 継続監視事項
- TypeScriptの型エラー
- パフォーマンス最適化
- セキュリティ監査

## 最終目標

### MVP版完成条件
1. 3つの質問による申請枠判定が動作
2. 必要書類の自動抽出が機能
3. 着金スケジュールの表示
4. 企業情報の登録・編集・表示
5. 全機能の統合テスト完了

### 成功指標
- ユーザーの申請準備時間70%削減
- 必要書類の見落としゼロ
- システム応答時間 p95 < 500ms
- テストカバレッジ 90%以上

---

**最終更新**: 2025-06-20  
**作成者**: boss1  
**承認者**: PRESIDENT  
**バージョン**: 1.0