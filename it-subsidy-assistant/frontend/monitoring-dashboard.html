<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITè£œåŠ©é‡‘ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }

        .dashboard {
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: #e8f5e8;
            padding: 8px 16px;
            border-radius: 25px;
            color: #2e7d32;
            font-weight: 600;
        }

        .status-indicator.warning {
            background: #fff3e0;
            color: #f57c00;
        }

        .status-indicator.critical {
            background: #ffebee;
            color: #d32f2f;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.15);
        }

        .metric-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .metric-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .metric-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .icon-security {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
        }

        .icon-performance {
            background: linear-gradient(45deg, #4834d4, #6c5ce7);
            color: white;
        }

        .icon-quality {
            background: linear-gradient(45deg, #00d2d3, #01a3a4);
            color: white;
        }

        .icon-system {
            background: linear-gradient(45deg, #feca57, #ff9ff3);
            color: white;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .metric-label {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .metric-trend {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .trend-up {
            color: #27ae60;
        }

        .trend-down {
            color: #e74c3c;
        }

        .trend-stable {
            color: #f39c12;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .chart-canvas {
            width: 100%;
            height: 400px;
        }

        .alerts-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .alert-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 4px solid;
        }

        .alert-critical {
            background: #ffebee;
            border-left-color: #d32f2f;
        }

        .alert-warning {
            background: #fff3e0;
            border-left-color: #f57c00;
        }

        .alert-info {
            background: #e3f2fd;
            border-left-color: #1976d2;
        }

        .alert-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .alert-time {
            font-size: 0.8rem;
            color: #666;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .control-button.active {
            background: linear-gradient(45deg, #2c3e50, #34495e);
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #27ae60;
            font-weight: 600;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #27ae60;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        @media (max-width: 1024px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .dashboard {
                padding: 15px;
            }
        }

        .system-health {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .health-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .health-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .health-label {
            font-size: 0.9rem;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»å“è³ªç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
            <div class="live-indicator">
                <div class="live-dot"></div>
                ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ä¸­
            </div>
            <div id="systemStatus" class="status-indicator">
                ğŸŸ¢ ã‚·ã‚¹ãƒ†ãƒ æ­£å¸¸
            </div>
        </div>

        <div class="controls">
            <button class="control-button active" onclick="setTimeRange('1h')">1æ™‚é–“</button>
            <button class="control-button" onclick="setTimeRange('6h')">6æ™‚é–“</button>
            <button class="control-button" onclick="setTimeRange('24h')">24æ™‚é–“</button>
            <button class="control-button" onclick="setTimeRange('7d')">7æ—¥é–“</button>
            <button class="control-button" onclick="exportReport()">ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›</button>
            <button class="control-button" onclick="refreshData()">æ›´æ–°</button>
        </div>

        <div class="dashboard-grid">
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„…å¨</span>
                    <div class="metric-icon icon-security">ğŸ›¡ï¸</div>
                </div>
                <div class="metric-value" id="securityThreats">0</div>
                <div class="metric-label">éå»24æ™‚é–“ã®æ¤œå‡ºæ•°</div>
                <div class="metric-trend trend-down">
                    â†“ 15% å‰æ—¥æ¯”
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">å¹³å‡å¿œç­”æ™‚é–“</span>
                    <div class="metric-icon icon-performance">âš¡</div>
                </div>
                <div class="metric-value" id="avgResponseTime">245ms</div>
                <div class="metric-label">éå»1æ™‚é–“ã®å¹³å‡</div>
                <div class="metric-trend trend-up">
                    â†‘ 8% å‰æ™‚é–“æ¯”
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">å“è³ªã‚¹ã‚³ã‚¢</span>
                    <div class="metric-icon icon-quality">ğŸ“Š</div>
                </div>
                <div class="metric-value" id="qualityScore">98.5%</div>
                <div class="metric-label">ç·åˆå“è³ªè©•ä¾¡</div>
                <div class="metric-trend trend-stable">
                    â†’ å®‰å®š
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡</span>
                    <div class="metric-icon icon-system">ğŸ”„</div>
                </div>
                <div class="metric-value" id="uptime">99.98%</div>
                <div class="metric-label">éå»30æ—¥é–“</div>
                <div class="metric-trend trend-stable">
                    â†’ ç›®æ¨™é”æˆ
                </div>
            </div>
        </div>

        <div class="grid-2">
            <div class="chart-container">
                <div class="chart-title">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ãƒ¡ãƒˆãƒªã‚¯ã‚¹</div>
                <canvas id="metricsChart" class="chart-canvas"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-title">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæ¨ç§»</div>
                <canvas id="securityChart" class="chart-canvas"></canvas>
            </div>
        </div>

        <div class="grid-2">
            <div class="chart-container">
                <div class="chart-title">ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹</div>
                <div class="system-health">
                    <div class="health-item">
                        <div class="health-value" id="cpuUsage">45%</div>
                        <div class="health-label">CPUä½¿ç”¨ç‡</div>
                    </div>
                    <div class="health-item">
                        <div class="health-value" id="memoryUsage">68%</div>
                        <div class="health-label">ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡</div>
                    </div>
                    <div class="health-item">
                        <div class="health-value" id="diskUsage">32%</div>
                        <div class="health-label">ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡</div>
                    </div>
                    <div class="health-item">
                        <div class="health-value" id="activeUsers">1,247</div>
                        <div class="health-label">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼</div>
                    </div>
                </div>
                <canvas id="systemChart" class="chart-canvas"></canvas>
            </div>

            <div class="alerts-panel">
                <h3 class="chart-title">æœ€æ–°ã®ã‚¢ãƒ©ãƒ¼ãƒˆ</h3>
                <div id="alertsList">
                    <div class="alert-item alert-critical">
                        <div class="alert-icon" style="background: #d32f2f;">!</div>
                        <div class="alert-content">
                            <div class="alert-title">é«˜ãƒ¬ãƒ¼ãƒˆåˆ¶é™é•å</div>
                            <div class="alert-time">3åˆ†å‰</div>
                        </div>
                    </div>
                    <div class="alert-item alert-warning">
                        <div class="alert-icon" style="background: #f57c00;">âš </div>
                        <div class="alert-content">
                            <div class="alert-title">å¿œç­”æ™‚é–“å¢—åŠ </div>
                            <div class="alert-time">15åˆ†å‰</div>
                        </div>
                    </div>
                    <div class="alert-item alert-info">
                        <div class="alert-icon" style="background: #1976d2;">â„¹</div>
                        <div class="alert-content">
                            <div class="alert-title">å®šæœŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³å®Œäº†</div>
                            <div class="alert-time">1æ™‚é–“å‰</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let metricsChart, securityChart, systemChart;
        let currentTimeRange = '1h';
        let updateInterval;

        // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            startRealTimeUpdates();
            updateMetrics();
        });

        // ãƒãƒ£ãƒ¼ãƒˆåˆæœŸåŒ–
        function initializeCharts() {
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒãƒ£ãƒ¼ãƒˆ
            const metricsCtx = document.getElementById('metricsChart').getContext('2d');
            metricsChart = new Chart(metricsCtx, {
                type: 'line',
                data: {
                    labels: generateTimeLabels(),
                    datasets: [
                        {
                            label: 'å¿œç­”æ™‚é–“ (ms)',
                            data: generateRandomData(50, 200, 300),
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y'
                        },
                        {
                            label: 'ã‚¨ãƒ©ãƒ¼ç‡ (%)',
                            data: generateRandomData(50, 0, 5),
                            borderColor: '#ff6b6b',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'å¿œç­”æ™‚é–“ (ms)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'ã‚¨ãƒ©ãƒ¼ç‡ (%)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });

            // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒ£ãƒ¼ãƒˆ
            const securityCtx = document.getElementById('securityChart').getContext('2d');
            securityChart = new Chart(securityCtx, {
                type: 'bar',
                data: {
                    labels: ['SQLæ³¨å…¥', 'XSS', 'CSRF', 'DDoS', 'ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹', 'ãã®ä»–'],
                    datasets: [{
                        label: 'è„…å¨æ¤œå‡ºæ•°',
                        data: [12, 8, 3, 15, 22, 7],
                        backgroundColor: [
                            '#ff6b6b',
                            '#feca57',
                            '#48cae4',
                            '#ff9ff3',
                            '#54a0ff',
                            '#5f27cd'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ£ãƒ¼ãƒˆ
            const systemCtx = document.getElementById('systemChart').getContext('2d');
            systemChart = new Chart(systemCtx, {
                type: 'doughnut',
                data: {
                    labels: ['æ­£å¸¸', 'è­¦å‘Š', 'é‡è¦'],
                    datasets: [{
                        data: [85, 12, 3],
                        backgroundColor: ['#27ae60', '#f39c12', '#e74c3c']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°é–‹å§‹
        function startRealTimeUpdates() {
            updateInterval = setInterval(updateMetrics, 5000); // 5ç§’ã”ã¨
        }

        // ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
        function updateMetrics() {
            // APIå‘¼ã³å‡ºã—ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            const metrics = simulateAPICall();
            
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹å€¤æ›´æ–°
            document.getElementById('securityThreats').textContent = metrics.securityThreats;
            document.getElementById('avgResponseTime').textContent = metrics.avgResponseTime + 'ms';
            document.getElementById('qualityScore').textContent = metrics.qualityScore + '%';
            document.getElementById('uptime').textContent = metrics.uptime + '%';
            
            // ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹æ›´æ–°
            document.getElementById('cpuUsage').textContent = metrics.cpuUsage + '%';
            document.getElementById('memoryUsage').textContent = metrics.memoryUsage + '%';
            document.getElementById('diskUsage').textContent = metrics.diskUsage + '%';
            document.getElementById('activeUsers').textContent = metrics.activeUsers.toLocaleString();

            // ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
            updateSystemStatus(metrics.systemHealth);

            // ãƒãƒ£ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿æ›´æ–°
            updateChartData(metrics);
        }

        // APIã‚³ãƒ¼ãƒ«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        function simulateAPICall() {
            return {
                securityThreats: Math.floor(Math.random() * 10),
                avgResponseTime: 200 + Math.floor(Math.random() * 100),
                qualityScore: (98 + Math.random() * 2).toFixed(1),
                uptime: (99.9 + Math.random() * 0.1).toFixed(2),
                cpuUsage: Math.floor(40 + Math.random() * 20),
                memoryUsage: Math.floor(60 + Math.random() * 20),
                diskUsage: Math.floor(30 + Math.random() * 10),
                activeUsers: 1200 + Math.floor(Math.random() * 100),
                systemHealth: Math.random() > 0.8 ? 'warning' : 'healthy'
            };
        }

        // ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
        function updateSystemStatus(health) {
            const statusElement = document.getElementById('systemStatus');
            
            if (health === 'critical') {
                statusElement.className = 'status-indicator critical';
                statusElement.innerHTML = 'ğŸ”´ ã‚·ã‚¹ãƒ†ãƒ éšœå®³';
            } else if (health === 'warning') {
                statusElement.className = 'status-indicator warning';
                statusElement.innerHTML = 'ğŸŸ¡ æ³¨æ„ãŒå¿…è¦';
            } else {
                statusElement.className = 'status-indicator';
                statusElement.innerHTML = 'ğŸŸ¢ ã‚·ã‚¹ãƒ†ãƒ æ­£å¸¸';
            }
        }

        // ãƒãƒ£ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿æ›´æ–°
        function updateChartData(metrics) {
            // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒãƒ£ãƒ¼ãƒˆã«ãƒ‡ãƒ¼ã‚¿è¿½åŠ 
            const now = new Date();
            const timeLabel = now.toLocaleTimeString();
            
            metricsChart.data.labels.push(timeLabel);
            metricsChart.data.datasets[0].data.push(metrics.avgResponseTime);
            metricsChart.data.datasets[1].data.push(Math.random() * 5);
            
            // å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ï¼ˆ50ãƒã‚¤ãƒ³ãƒˆã¾ã§ä¿æŒï¼‰
            if (metricsChart.data.labels.length > 50) {
                metricsChart.data.labels.shift();
                metricsChart.data.datasets[0].data.shift();
                metricsChart.data.datasets[1].data.shift();
            }
            
            metricsChart.update('none');
        }

        // æ™‚é–“ç¯„å›²è¨­å®š
        function setTimeRange(range) {
            currentTimeRange = range;
            
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹æ›´æ–°
            document.querySelectorAll('.control-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ãƒ‡ãƒ¼ã‚¿æ›´æ–°
            updateMetrics();
        }

        // ãƒ‡ãƒ¼ã‚¿æ›´æ–°
        function refreshData() {
            updateMetrics();
            
            // è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'æ›´æ–°ä¸­...';
            button.disabled = true;
            
            setTimeout(() => {
                button.textContent = originalText;
                button.disabled = false;
            }, 1000);
        }

        // ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›
        function exportReport() {
            const reportData = {
                timestamp: new Date().toISOString(),
                timeRange: currentTimeRange,
                metrics: {
                    securityThreats: document.getElementById('securityThreats').textContent,
                    avgResponseTime: document.getElementById('avgResponseTime').textContent,
                    qualityScore: document.getElementById('qualityScore').textContent,
                    uptime: document.getElementById('uptime').textContent
                }
            };
            
            const blob = new Blob([JSON.stringify(reportData, null, 2)], {
                type: 'application/json'
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `security-quality-report-${new Date().toISOString().slice(0, 19)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function generateTimeLabels() {
            const labels = [];
            const now = new Date();
            for (let i = 49; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60000); // 1åˆ†é–“éš”
                labels.push(time.toLocaleTimeString());
            }
            return labels;
        }

        function generateRandomData(count, min, max) {
            const data = [];
            for (let i = 0; i < count; i++) {
                data.push(Math.floor(Math.random() * (max - min + 1)) + min);
            }
            return data;
        }

        // Webãƒšãƒ¼ã‚¸ãŒéè¡¨ç¤ºã«ãªã£ãŸã‚‰æ›´æ–°ã‚’åœæ­¢
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                if (updateInterval) {
                    clearInterval(updateInterval);
                }
            } else {
                startRealTimeUpdates();
            }
        });

        // ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        window.addEventListener('beforeunload', function() {
            if (updateInterval) {
                clearInterval(updateInterval);
            }
        });
    </script>
</body>
</html>